<div class="row">
  <div class="two-thirds column">
    <div class="widget">
      <div class="widget-header">
        <h2 class="widget-title">Stacked Column Chart Title</h2>
      </div>
      <div class="widget-content">
        <div id="column-bar-stacked-example" class="chart-container"></div>
      </div>
    </div>
  </div>
</div>

<ul id="action-popupmenu" class="popupmenu">
  <li><a href="#" class="action-1">Action One</a></li>
  <li><a href="#" class="action-2">Action Two</a></li>
  <li><a href="#" class="action-3">Action Three</a></li>
</ul>

<script id="test-script">
  $('body').on('initialized', function () {
    var dataset = [{
      data: [{
        name: 'Jan',
        value: 12,
      }, {
        name: 'Feb',
        value: 11
      }, {
        name: 'Mar',
        value: 14
      }, {
        name: 'Apr',
        value: 10
      }, {
        name: 'May',
        value: 14
      }, {
        name: 'Jun',
        value: 8
      }, {
        name: 'Jul',
        value: 7
      }, {
        name: 'Aug',
        value: 10
      }, {
        name: 'Sep',
        value: 9
      }, {
        name: 'Oct',
        value: 8
      }, {
        name: 'Nov',
        value: 10
      }, {
        name: 'Dec',
        value: 6
      }],
      name: '2018'
    }, {
      data: [{
        name: 'Jan',
        value: 22
      }, {
        name: 'Feb',
        value: 21
      }, {
        name: 'Mar',
        value: 24
      }, {
        name: 'Apr',
        value: 20
      }, {
        name: 'May',
        value: 24
      }, {
        name: 'Jun',
        value: 28
      }, {
        name: 'Jul',
        value: 27
      }, {
        name: 'Aug',
        value: 20
      }, {
        name: 'Sep',
        value: 29
      }, {
        name: 'Oct',
        value: 28
      }, {
        name: 'Nov',
        value: 20
      }, {
        name: 'Dec',
        value: 26
      }],
      name: '2017'
    }, {
      data: [{
        name: 'Jan',
        value: 32
      }, {
        name: 'Feb',
        value: 31
      }, {
        name: 'Mar',
        value: 34
      }, {
        name: 'Apr',
        value: 30
      }, {
        name: 'May',
        value: 34
      }, {
        name: 'Jun',
        value: 38
      }, {
        name: 'Jul',
        value: 37
      }, {
        name: 'Aug',
        value: 30
      }, {
        name: 'Sep',
        value: 39
      }, {
        name: 'Oct',
        value: 38
      }, {
        name: 'Nov',
        value: 30
      }, {
        name: 'Dec',
        value: 36
      }],
      name: '2016'
    }];

    // Element
    var elem = $('#column-bar-stacked-example');

    // Show Popupmenu
    function showPopupmenu (e) {
      elem.popupmenu({ trigger: 'immediate', menu: 'action-popupmenu', eventObj: e })
        .off('selected').on('selected', function (e, anchor) {
          console.log('selected:', anchor[0]);
        });
    }

    // Invoke
    elem.chart({ type: 'column-stacked', dataset: dataset });

    // Bind Contextmenu
    elem.on('contextmenu', function(e, el, d) {
      if (el) {
        console.log('Contextmenu:', { element: el, data: d });
        showPopupmenu(e);
      }
    });

  });
</script>
